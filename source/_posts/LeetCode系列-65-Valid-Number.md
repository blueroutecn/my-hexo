---
mathjax: true
title: 白话LeetCode | 65. Valid Number
date: 2016-09-30 18:37:49
categories: 白话LeetCode
tags: [字符串]
---


<meta http-equiv=Content-Type content="text/html;charset=utf-8">


##	问题描述

(原题链接：[LeetCode | 65. Valid Number](https://leetcode.com/problems/valid-number/))

判断给定的字符串是否为数字类型。如下所示：

`"0"` => `true`

`" 0.1 "` => `true`

`"abc"` => `false`

`"1 a"` => `false`

`"2e10"` => `true`
	

##	解题思路

这是一道字符串类型的模拟题，旨在考察应聘者是否能全面的思考问题。应聘者需要在面试的过程中形成如下条理清晰的思路：

1.	数字类型除了可以表示成我们最常见的形式，还可以表示成科学计数法形式('e'后一定为整数)，例如`"1.2e12"`；
2.	字符串的前缀和后缀中是否包含空白符，如果包含空白符的话需要对其删除，例如`" 0.1 "`=>`"0.1"`；
3.	字符串前缀是否包含'+'或'-'，如果包含正负号需要对齐删除，例如`"+0.1"`=>`"0.1"`；
4.	从左向右扫描字符串，包含以下几种情况：
	1.	如果为数字，则该字符串可能为数字类型，继续扫描；
	2.	如果为'.'，则该字符串可能为小数形式或者科学计数法形式，'.'后必须尾随数字，例如`"1.2"`、`"1.2e12"`；
	3.	如果为'e'，则该字符串为科学计数法形式，'e'后必须尾随数字；
	4.	如果为'+'或'-'，则该字符串为科学计数法形式，且正负号一定尾随在'e'后，例如`"1.2e+12"`
	5.	如果为其他字符，则该字符串不可能为数字类型。
	
需要注意以下两点：

1.	'e'最多出现一次；
2.	'.'最多出现一次，例如`"1.2"`，在科学计数法中必须出现在'e'之前，例如`"1.2e12"`。

有了如上的分析，不难写出完整的代码。

##	代码实现


```c++
class Solution {
public:
    bool isNumber(string s) {
        int l = 0, r = s.length() - 1;
        // 删除前缀中的空白符
        while (l <= r && ' ' == s[l]) ++l;
        // 删除后缀中的空白符
        while (l <= r && ' ' == s[r]) --r;
        // 删除前缀中的正负号
        if ('-' == s[l] || '+' == s[l]) ++l;
        bool ans = false, dot = false, exp = false;
        // 从左向右遍历扫描
        while (l <= r) {
            // 如果为数字字符，则可能正确
            if ('0' <= s[l] && '9' >= s[l]) {
                ans = true;
            }
            // '.'最多出现一次，且不能出现在'e'的右侧
            else if ('.' == s[l] && !dot && !exp) {
                dot = true;
            }
            // 'e'最多出现一次，且之前部分的字符串可以组成数字类型
            else if ('e' == s[l] && !exp && ans) {
                exp = true;
                ans = false;
            }
            // '+'或'-'必须出现在'e'之后
            else if ('-' == s[l] || '+' == s[l]) {
                if ('e' != s[l - 1]) {
                    return false;
                }
            }
            else {
                return false;
            }
            ++l;
        }
        return ans;
    }
};
```